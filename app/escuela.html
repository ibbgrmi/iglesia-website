<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Escuela Dominical</title>

  <meta name="theme-color" content="#0b2a3a" />
  <meta name="apple-mobile-web-app-capable" content="yes" />

  <style>
    :root{
      --bg:#071a24;
      --card:rgba(10,26,36,.65);
      --border:rgba(255,255,255,.12);
      --text:#eaf2f7;
      --muted:rgba(234,242,247,.75);
      --btn:rgba(255,255,255,.08);
      --btn2:rgba(255,255,255,.12);
      --accent:rgba(120,200,255,.25);
    }
    body{
      margin:0;
      font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial;
      color:var(--text);
      background:
        radial-gradient(1200px 700px at 20% 0%, rgba(255,255,255,.10), transparent 60%),
        linear-gradient(180deg, #061520, #071a24);
      min-height:100vh;
    }
    .wrap{max-width:900px;margin:0 auto;padding:18px;}
    .card{
      background:var(--card);
      border:1px solid var(--border);
      border-radius:18px;
      padding:14px 14px;
      box-shadow: 0 10px 35px rgba(0,0,0,.35);
      backdrop-filter: blur(10px);
    }
    .title{
      display:flex;
      align-items:flex-start;
      justify-content:space-between;
      gap:12px;
      margin-bottom:10px;
    }
    h1{font-size:22px;margin:0;}
    .sub{color:var(--muted);font-size:14px;margin-top:4px}
    .btnRow{display:flex;gap:10px;flex-wrap:wrap;margin-top:10px;}
    .btn{
      display:inline-flex;
      align-items:center;
      gap:8px;
      padding:10px 12px;
      border-radius:12px;
      border:1px solid var(--border);
      background:var(--btn);
      color:var(--text);
      text-decoration:none;
      cursor:pointer;
      font-weight:600;
      user-select:none;
    }
    .btn:hover{background:var(--btn2);}
    .btn.primary{background:rgba(80,170,255,.14); border-color:rgba(80,170,255,.30);}
    .btn.danger{background:rgba(255,120,120,.12); border-color:rgba(255,120,120,.25);}
    .list{margin-top:12px;display:flex;flex-direction:column;gap:10px;}
    .item{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:12px;
      padding:12px;
      border-radius:16px;
      border:1px solid var(--border);
      background:rgba(0,0,0,.12);
    }
    .itemLeft{display:flex;gap:12px;align-items:center;}
    .icon{
      width:34px;height:34px;border-radius:12px;
      display:grid;place-items:center;
      border:1px solid var(--border);
      background:rgba(255,255,255,.06);
      font-size:18px;
    }
    .meta{line-height:1.1}
    .name{font-weight:800}
    .file{color:var(--muted);font-size:13px;margin-top:4px}
    .openBtn{white-space:nowrap}
    .note{color:var(--muted);font-size:13px;margin-top:12px}

    /* Modal visor PDF */
    .modal{
      position:fixed; inset:0;
      background:rgba(0,0,0,.65);
      display:none;
      z-index:9999;
      padding:12px;
    }
    .modal.show{display:block;}
    .modalCard{
      height:100%;
      max-width:1100px;
      margin:0 auto;
      background:rgba(10,26,36,.92);
      border:1px solid var(--border);
      border-radius:18px;
      overflow:hidden;
      display:flex;
      flex-direction:column;
      box-shadow: 0 20px 60px rgba(0,0,0,.55);
    }
    .modalTop{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:10px;
      padding:12px;
      border-bottom:1px solid var(--border);
      background:rgba(255,255,255,.04);
    }
    .modalTitle{
      font-weight:800;
      display:flex;
      flex-direction:column;
      gap:2px;
      min-width:0;
    }
    .modalTitle span{font-size:14px;color:var(--muted);font-weight:600}
    .modalTitle b{font-size:15px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
    .modalBtns{display:flex;gap:10px;flex-wrap:wrap;justify-content:flex-end;}
    .frameWrap{flex:1; background:#fff;}
    iframe{
      width:100%;
      height:100%;
      border:0;
      background:#fff;
    }

    /* iPhone: los botones se ven bien */
    @media (max-width:520px){
      h1{font-size:20px}
      .btn{padding:10px 10px}
    }
  </style>
</head>

<body>
  <div class="wrap">
    <div class="card">
      <div class="title">
        <div>
          <h1>üìò Secci√≥n de la Escuela Dominical</h1>
          <div class="sub">Seleccione el material y √°bralo sin salir del app.</div>
        </div>
        <div class="btnRow">
          <a class="btn" href="/app/index.html">‚¨Ö Volver</a>
          <button class="btn primary" onclick="openFirst()">üìÑ Abrir √∫ltimo PDF</button>
        </div>
      </div>

      <div class="list" id="list"></div>

      <div class="note">
        Si su iPhone intenta abrir el PDF fuera del app, use el bot√≥n <b>‚ÄúAbrir aqu√≠‚Äù</b> (visor interno).
      </div>
    </div>
  </div>

  <!-- MODAL -->
  <div class="modal" id="modal" aria-hidden="true">
    <div class="modalCard">
      <div class="modalTop">
        <div class="modalTitle">
          <b id="modalName">PDF</b>
          <span id="modalFile">archivo.pdf</span>
        </div>
        <div class="modalBtns">
          <button class="btn danger" onclick="closePdf()">‚¨Ö Volver</button>
          <!-- Fallback opcional por si alg√∫n iPhone no embebe el PDF -->
          <a class="btn" id="openNative" href="#" target="_blank" rel="noopener">Abrir afuera</a>
        </div>
      </div>
      <div class="frameWrap">
        <iframe id="pdfFrame" title="Visor PDF"></iframe>
      </div>
    </div>
  </div>

  <script>
    // Tus archivos EXACTOS (como est√°n en GitHub)
    const files = [
      { name: "üìñ Material Completo del Alumno", file: "Alumno.pdf" },
      { name: "üìÑ Lecci√≥n 1", file: "leccion-01.pdf.pdf" },
      { name: "üìÑ Lecci√≥n 2", file: "leccion-02.pdf.pdf" },
      { name: "üìÑ Lecci√≥n 3", file: "leccion-03.pdf.pdf" },
      { name: "üìÑ Lecci√≥n 4", file: "leccion-04.pdf.pdf" },
      { name: "üìÑ Lecci√≥n 5", file: "leccion-05.pdf.pdf" },
      { name: "üìÑ Lecci√≥n 6", file: "leccion-06.pdf.pdf" }
    ];

    const basePath = "/app/escuela-dominical/";
    const list = document.getElementById("list");

    function renderList(){
      list.innerHTML = "";
      files.forEach((it) => {
        const row = document.createElement("div");
        row.className = "item";

        const left = document.createElement("div");
        left.className = "itemLeft";
        left.innerHTML = `
          <div class="icon">üìÑ</div>
          <div class="meta">
            <div class="name">${it.name}</div>
            <div class="file">${it.file}</div>
          </div>
        `;

        const btn = document.createElement("button");
        btn.className = "btn primary openBtn";
        btn.textContent = "Abrir aqu√≠";
        btn.onclick = () => openPdf(it);

        row.appendChild(left);
        row.appendChild(btn);
        list.appendChild(row);
      });
    }

    function openPdf(item){
      const url = basePath + item.file;

      // Modal
      document.getElementById("modalName").textContent = item.name.replace("üìÑ ","").replace("üìñ ","");
      document.getElementById("modalFile").textContent = item.file;

      // iframe (visor interno)
      // Tip: agregar cache-buster para iOS si se queda pegado
      const frame = document.getElementById("pdfFrame");
      frame.src = url + "?v=" + Date.now();

      // Link fallback por si alguien quiere abrir afuera
      const native = document.getElementById("openNative");
      native.href = url;

      const modal = document.getElementById("modal");
      modal.classList.add("show");
      modal.setAttribute("aria-hidden", "false");
    }

    function closePdf(){
      const modal = document.getElementById("modal");
      modal.classList.remove("show");
      modal.setAttribute("aria-hidden", "true");
      document.getElementById("pdfFrame").src = "about:blank";
    }

    function openFirst(){
      // Abre el √∫ltimo (Lecci√≥n 6). Cambia a [0] si quieres que sea Alumno.pdf
      openPdf(files[files.length - 1]);
    }

    // Cierra el modal si tocan fuera de la tarjeta
    document.getElementById("modal").addEventListener("click", (e) => {
      if (e.target.id === "modal") closePdf();
    });

    renderList();
  </script>
</body>
</html>
